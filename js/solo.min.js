const socket=io("wss:///",{autoConnect:!1}),btns=document.getElementById("buttons-wrapper"),progBar=document.getElementById("progbar");function shuffle(a){let b=a.length,d,c;for(;0!==b;)c=Math.floor(Math.random()*b),b-=1,d=a[b],a[b]=a[c],a[c]=d;return a}function replaceButtons(a){document.getElementById("btn-1").innerHTML=a[0],document.getElementById("btn-2").innerHTML=a[1],document.getElementById("btn-3").innerHTML=a[2],document.getElementById("btn-4").innerHTML=a[3]}function start(a){a?(document.getElementById("solo-msg").toggleAttribute("hidden"),socket.connect()):(document.getElementById("solo-fail").toggleAttribute("hidden"),socket.connect()),btns.toggleAttribute("hidden"),socket.emit("getQ")}btns.addEventListener("submit",a=>{a.preventDefault(),socket.emit("izbor",a.submitter.textContent)}),socket.on("log",console.log),socket.on("questions",(a,b)=>{progBar.classList.remove("progress"),progBar.offsetWidth,progBar.classList.add("progress"),document.querySelector("body").style.setProperty("--animation-time",b+"ms"),document.getElementById("question").innerHTML=a.prompt,replaceButtons(shuffle(a.answers)),console.log(a,b)}),socket.on("res",(a,b,c)=>{console.log(a),a?socket.emit("getQ"):(btns.toggleAttribute("hidden"),c?document.getElementById("reason").innerText="Ostao si bez vremena!":document.getElementById("reason").innerText="Pogresno si odgovorio na to pitanje!",document.getElementById("solo-score").innerText=`${b}`,document.getElementById("solo-fail").toggleAttribute("hidden"))})